<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>全志V3S上通过蓝牙播放音乐 | xfdr0805·点滴记忆</title><meta name="author" content="xfdr0805"><meta name="copyright" content="xfdr0805"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="我使用的是RTL8723DS模块，引脚与BS是兼容的，内核使用的是5.10, Bluez使用的是5.55 终端是UART0，蓝牙串口使用的是UART2，板子是参照licheepi 自己画的 参考链接BT参考链接WIFI参考链接    首先在buildroot里勾选上bluez5-utils,blue"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://xfdr0805.gitee.io/pages/d436/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '全志V3S上通过蓝牙播放音乐',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-02-19 10:44:52'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.1.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='null'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">38</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">75</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><hr class="custom-hr"/></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="xfdr0805·点滴记忆"><span class="site-name">xfdr0805·点滴记忆</span></a></span><div id="menus"><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">全志V3S上通过蓝牙播放音乐</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-07-27T06:06:18.000Z" title="发表于 2021-07-27 14:06:18">2021-07-27</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-02-19T02:44:52.572Z" title="更新于 2023-02-19 10:44:52">2023-02-19</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/">Linux</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>23分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="全志V3S上通过蓝牙播放音乐"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="post-content" id="article-container"><p><code>我使用的是RTL8723DS模块，引脚与BS是兼容的，内核使用的是5.10, Bluez使用的是5.55 终端是UART0，蓝牙串口使用的是UART2，板子是参照licheepi 自己画的</code></p>
<p><a target="_blank" rel="noopener" href="https://gitee.com/yocop/drv_bt_rtl8723ds">参考链接</a><br><a target="_blank" rel="noopener" href="https://github.com/Poco-Ye/rtl8723DS-BT-uart-driver">BT参考链接</a><br><a target="_blank" rel="noopener" href="https://github.com/lwfinger/rtl8723ds">WIFI参考链接</a></p>
<img src="/pages/d436/2021-07-28_T.png" class="" title="top">
<img src="/pages/d436/2021-07-28_B.png" class="" title="top">
<ol>
<li>首先在buildroot里勾选上bluez5-utils,bluez-tools及blue-alsa</li>
<li>在内核里勾选<br> [<em>]UART(H4) protocol support<br> [</em>]Realtek Three-wireUART(H5) protocol support<br> 系统启动时会显示如下信息：<br> Starting kernel …<br><br> [    0.000000] Booting Linux on physical CPU 0x0<br> [    0.000000] Linux version 5.10.19 (xfdr@virtualbox) (arm-linux-gnueabihf-gcc (Linaro GCC 7.5-2019.12) 7.5.0, GNU ld (Linaro_Binutils-2019.12) 2.28.2.20170706) #13 SMP Fri Jul 23 12:00:59 CST 2021<br> [    0.000000] CPU: ARMv7 Processor [410fc075] revision 5 (ARMv7), cr&#x3D;10c5387d<br> [    0.000000] CPU: div instructions available: patching division code<br> [    0.000000] CPU: PIPT &#x2F; VIPT nonaliasing data cache, VIPT aliasing instruction cache<br> [    0.000000] OF: fdt: Machine model: Lichee Pi Zero with Dock<br> [    0.000000] Memory policy: Data cache writealloc<br> [    0.000000] cma: Reserved 16 MiB at 0x41c00000<br> [    0.000000] Zone ranges:<br> [    0.000000]   Normal   [mem 0x0000000040000000-0x0000000043ffffff]<br> [    0.000000]   HighMem  empty<br> [    0.000000] Movable zone start for each node<br> [    0.000000] Early memory node ranges<br> [    0.000000]   node   0: [mem 0x0000000040000000-0x0000000043ffffff]<br> [    0.000000] Initmem setup node 0 [mem 0x0000000040000000-0x0000000043ffffff]<br> [    0.000000] psci: probing for conduit method from DT.<br> [    0.000000] psci: Using PSCI v0.1 Function IDs from DT<br> [    0.000000] percpu: Embedded 15 pages&#x2F;cpu s31052 r8192 d22196 u61440<br> [    0.000000] Built 1 zonelists, mobility grouping on.  Total pages: 16256<br> [    0.000000] Kernel command line: console&#x3D;ttyS0,115200 panic&#x3D;5 console&#x3D;ttyS0 rootwait vt.global_cursor_default&#x3D;0 root&#x3D;&#x2F;dev&#x2F;mmcblk0p2 earlyprintk rw<br> [    0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes, linear)<br> [    0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes, linear)<br> [    0.000000] mem auto-init: stack:off, heap alloc:off, heap free:off<br> [    0.000000] Memory: 34900K&#x2F;65536K available (8192K kernel code, 918K rwdata, 2244K rodata, 1024K init, 284K bss, 14252K reserved, 16384K cma-reserved, 0K highmem)<br> [    0.000000] SLUB: HWalign&#x3D;64, Order&#x3D;0-3, MinObjects&#x3D;0, CPUs&#x3D;1, Nodes&#x3D;1<br> [    0.000000] rcu: Hierarchical RCU implementation.<br> [    0.000000] rcu:     RCU restricting CPUs from NR_CPUS&#x3D;8 to nr_cpu_ids&#x3D;1.<br> [    0.000000] rcu: RCU calculated value of scheduler-enlistment delay is 10 jiffies.<br> [    0.000000] rcu: Adjusting geometry for rcu_fanout_leaf&#x3D;16, nr_cpu_ids&#x3D;1<br> [    0.000000] NR_IRQS: 16, nr_irqs: 16, preallocated irqs: 16<br> [    0.000000] GIC: Using split EOI&#x2F;Deactivate mode<br> [    0.000000] random: get_random_bytes called from start_kernel+0x328&#x2F;0x4c0 with crng_init&#x3D;0<br> [    0.000000] arch_timer: cp15 timer(s) running at 24.00MHz (phys).<br> [    0.000000] clocksource: arch_sys_counter: mask: 0xffffffffffffff max_cycles: 0x588fe9dc0, max_idle_ns: 440795202592 ns<br> [    0.000008] sched_clock: 56 bits at 24MHz, resolution 41ns, wraps every 4398046511097ns<br> [    0.000022] Switching to timer-based delay loop, resolution 41ns<br> [    0.000278] clocksource: timer: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 79635851949 ns<br> [    0.000593] Console: colour dummy device 80x30<br> [    0.000661] Calibrating delay loop (skipped), value calculated using timer frequency.. 48.00 BogoMIPS (lpj&#x3D;240000)<br> [    0.000684] pid_max: default: 32768 minimum: 301<br> [    0.000852] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes, linear)<br> [    0.000873] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes, linear)<br> [    0.001748] CPU: Testing write buffer coherency: ok<br> [    0.002186] &#x2F;cpus&#x2F;cpu@0 missing clock-frequency property<br> [    0.002218] CPU0: thread -1, cpu 0, socket 0, mpidr 80000000<br> [    0.002989] Setting up static identity map for 0x40100000 - 0x40100060<br> [    0.003218] rcu: Hierarchical SRCU implementation.<br> [    0.003764] smp: Bringing up secondary CPUs …<br> [    0.003792] smp: Brought up 1 node, 1 CPU<br> [    0.003802] SMP: Total of 1 processors activated (48.00 BogoMIPS).<br> [    0.003811] CPU: All CPU(s) started in HYP mode.<br> [    0.003818] CPU: Virtualization extensions available.<br> [    0.004452] devtmpfs: initialized<br> [    0.008373] VFP support v0.3: implementor 41 architecture 2 part 30 variant 7 rev 5<br> [    0.008733] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns<br> [    0.008771] futex hash table entries: 256 (order: 2, 16384 bytes, linear)<br> [    0.009561] pinctrl core: initialized pinctrl subsystem<br> [    0.011091] NET: Registered protocol family 16<br> [    0.012326] DMA: preallocated 256 KiB pool for atomic coherent allocations<br> [    0.013612] thermal_sys: Registered thermal governor ‘step_wise’<br> [    0.014006] hw-breakpoint: found 5 (+1 reserved) breakpoint and 4 watchpoint registers.<br> [    0.014032] hw-breakpoint: maximum watchpoint size is 8 bytes.<br> [    0.036802] SCSI subsystem initialized<br> [    0.037553] usbcore: registered new interface driver usbfs<br> [    0.037622] usbcore: registered new interface driver hub<br> [    0.037689] usbcore: registered new device driver usb<br> [    0.037967] mc: Linux media interface: v0.10<br> [    0.038015] videodev: Linux video capture interface: v2.00<br> [    0.038161] pps_core: LinuxPPS API ver. 1 registered<br> [    0.038174] pps_core: Software ver. 5.3.6 - Copyright 2005-2007 Rodolfo Giometti <a href="mailto:&#103;&#x69;&#111;&#x6d;&#101;&#116;&#x74;&#x69;&#x40;&#x6c;&#105;&#110;&#117;&#120;&#x2e;&#105;&#x74;">&#103;&#x69;&#111;&#x6d;&#101;&#116;&#x74;&#x69;&#x40;&#x6c;&#105;&#110;&#117;&#120;&#x2e;&#105;&#x74;</a><br> [    0.038198] PTP clock support registered<br> [    0.038880] Advanced Linux Sound Architecture Driver Initialized.<br> [    0.039575] Bluetooth: Core ver 2.22<br> [    0.039667] NET: Registered protocol family 31<br> [    0.039679] Bluetooth: HCI device and connection manager initialized<br> [    0.039703] Bluetooth: HCI socket layer initialized<br> [    0.039717] Bluetooth: L2CAP socket layer initialized<br> [    0.039750] Bluetooth: SCO socket layer initialized<br> [    0.040956] clocksource: Switched to clocksource arch_sys_counter<br> [    0.052288] NET: Registered protocol family 2<br> [    0.053034] tcp_listen_portaddr_hash hash table entries: 512 (order: 0, 6144 bytes, linear)<br> [    0.053084] TCP established hash table entries: 1024 (order: 0, 4096 bytes, linear)<br> [    0.053112] TCP bind hash table entries: 1024 (order: 1, 8192 bytes, linear)<br> [    0.053136] TCP: Hash tables configured (established 1024 bind 1024)<br> [    0.053298] UDP hash table entries: 256 (order: 1, 8192 bytes, linear)<br> [    0.053357] UDP-Lite hash table entries: 256 (order: 1, 8192 bytes, linear)<br> [    0.053602] NET: Registered protocol family 1<br> [    0.054648] RPC: Registered named UNIX socket transport module.<br> [    0.054681] RPC: Registered udp transport module.<br> [    0.054690] RPC: Registered tcp transport module.<br> [    0.054698] RPC: Registered tcp NFSv4.1 backchannel transport module.<br> [    0.056301] Initialise system trusted keyrings<br> [    0.056732] workingset: timestamp_bits&#x3D;30 max_order&#x3D;14 bucket_order&#x3D;0<br> [    0.063874] NFS: Registering the id_resolver key type<br> [    0.063951] Key type id_resolver registered<br> [    0.063960] Key type id_legacy registered<br> [    0.064015] ntfs: driver 2.1.32 [Flags: R&#x2F;W].<br> [    0.163771] Key type asymmetric registered<br> [    0.163804] Asymmetric key parser ‘x509’ registered<br> [    0.163906] Block layer SCSI generic (bsg) driver version 0.4 loaded (major 246)<br> [    0.163922] io scheduler mq-deadline registered<br> [    0.163931] io scheduler kyber registered<br> [    0.168836] sun8i-v3s-pinctrl 1c20800.pinctrl: initialized sunXi PIO driver<br> [    0.169687] sun8i-v3s-pinctrl 1c20800.pinctrl: supply vcc-pb not found, using dummy regulator<br> [    0.170628] pwm-backlight backlight: supply power not found, using dummy regulator<br> [    0.171287] pwm-backlight backlight: invalid default brightness level: 100, using 6<br> [    0.239906] Serial: 8250&#x2F;16550 driver, 8 ports, IRQ sharing disabled<br> [    0.244637] printk: console [ttyS0] disabled<br> [    0.264964] 1c28000.serial: ttyS0 at MMIO 0x1c28000 (irq &#x3D; 45, base_baud &#x3D; 1500000) is a U6_16550A<br> [    0.932953] printk: console [ttyS0] enabled<br> [    0.938208] sun8i-v3s-pinctrl 1c20800.pinctrl: supply vcc-pe not found, using dummy regulator<br> [    0.968606] 1c28400.serial: ttyS1 at MMIO 0x1c28400 (irq &#x3D; 46, base_baud &#x3D; 1500000) is a U6_16550A<br> [    0.999932] 1c28800.serial: ttyS2 at MMIO 0x1c28800 (irq &#x3D; 47, base_baud &#x3D; 1500000) is a U6_16550A<br> [    1.014962] panel-simple panel: supply power not found, using dummy regulator<br> [    1.022545] panel-simple panel: Specify missing connector_type<br> [    1.030391] libphy: Fixed MDIO Bus: probed<br> [    1.035212] CAN device driver interface<br> [    1.039657] dwmac-sun8i 1c30000.ethernet: IRQ eth_wake_irq not found<br> [    1.046143] dwmac-sun8i 1c30000.ethernet: IRQ eth_lpi not found<br> [    1.052210] dwmac-sun8i 1c30000.ethernet: No regulator found<br> [    1.057984] dwmac-sun8i 1c30000.ethernet: PTP uses main clock<br> [    1.064221] dwmac-sun8i 1c30000.ethernet: No HW DMA feature register supported<br> [    1.071527] dwmac-sun8i 1c30000.ethernet: RX Checksum Offload Engine supported<br> [    1.078747] dwmac-sun8i 1c30000.ethernet: COE Type 2<br> [    1.083730] dwmac-sun8i 1c30000.ethernet: TX Checksum insertion supported<br> [    1.090514] dwmac-sun8i 1c30000.ethernet: Normal descriptors<br> [    1.096184] dwmac-sun8i 1c30000.ethernet: Chain mode enabled<br> [    1.101867] dwmac-sun8i 1c30000.ethernet: device MAC address d6:56:90:e0:09:09<br> [    1.109732] libphy: stmmac: probed<br> [    1.114430] dwmac-sun8i 1c30000.ethernet: Found internal PHY node<br> [    1.121248] libphy: mdio_mux: probed<br> [    1.124869] dwmac-sun8i 1c30000.ethernet: Switch mux to internal PHY<br> [    1.131286] dwmac-sun8i 1c30000.ethernet: Powering internal PHY<br> [    1.139085] ehci_hcd: USB 2.0 ‘Enhanced’ Host Controller (EHCI) Driver<br> [    1.145759] ehci-platform: EHCI generic platform driver<br> [    1.151239] ohci_hcd: USB 1.1 ‘Open’ Host Controller (OHCI) Driver<br> [    1.157465] ohci-platform: OHCI generic platform driver<br> [    1.164161] input: 1c22800.lradc as &#x2F;devices&#x2F;platform&#x2F;soc&#x2F;1c22800.lradc&#x2F;input&#x2F;input0<br> [    1.173440] rotary-encoder rotary@0: gray<br> [    1.178460] input: rotary@0 as &#x2F;devices&#x2F;platform&#x2F;rotary@0&#x2F;input&#x2F;input1<br> [    1.187134] sun6i-rtc 1c20400.rtc: registered as rtc0<br> [    1.192416] sun6i-rtc 1c20400.rtc: setting system clock to 1970-01-01T01:26:51 UTC (5211)<br> [    1.200591] sun6i-rtc 1c20400.rtc: RTC enabled<br> [    1.205482] i2c &#x2F;dev entries driver<br> [    1.210476] input: ns2009_ts as &#x2F;devices&#x2F;platform&#x2F;soc&#x2F;1c2ac00.i2c&#x2F;i2c-0&#x2F;0-0048&#x2F;input&#x2F;input2<br> [    1.220426] Driver for 1-wire Dallas network protocol.<br> [    1.227208] sunxi-wdt 1c20ca0.watchdog: Watchdog enabled (timeout&#x3D;16 sec, nowayout&#x3D;0)<br> [    1.235342] Bluetooth: HCI UART driver ver 2.3<br> [    1.239793] Bluetooth: HCI UART protocol H4 registered<br> [    1.245041] Bluetooth: HCI UART protocol Three-wire (H5) registered<br> [    1.252426] sun8i-v3s-pinctrl 1c20800.pinctrl: supply vcc-pf not found, using dummy regulator<br> [    1.263407] sun8i-v3s-pinctrl 1c20800.pinctrl: supply vcc-pg not found, using dummy regulator<br> [    1.274623] ledtrig-cpu: registered to indicate activity on CPUs<br> [    1.281222] sun4i-ss 1c15000.crypto: Die ID 7<br> [    1.288761] usbcore: registered new interface driver usbhid<br> [    1.294484] usbhid: USB HID core driver<br> [    1.299370] sunxi-mmc 1c0f000.mmc: initialized, max. request size: 16384 KB<br> [    1.306740] sunxi-mmc 1c10000.mmc: initialized, max. request size: 16384 KB<br> [    1.316119] sun4i-codec 1c22c00.codec: Failed to register our card<br> [    1.324501] NET: Registered protocol family 17<br> [    1.328998] can: controller area network core<br> [    1.333627] NET: Registered protocol family 29<br> [    1.338086] can: raw protocol<br> [    1.341133] can: broadcast manager protocol<br> [    1.345329] can: netlink gateway - max_hops&#x3D;1<br> [    1.350297] Bluetooth: RFCOMM TTY layer initialized<br> [    1.355353] Bluetooth: RFCOMM socket layer initialized<br> [    1.360538] Bluetooth: RFCOMM ver 1.11<br> [    1.364363] Bluetooth: BNEP (Ethernet Emulation) ver 1.3<br> [    1.369672] Bluetooth: BNEP filters: protocol multicast<br> [    1.374928] Bluetooth: BNEP socket layer initialized<br> [    1.379890] Bluetooth: HIDP (Human Interface Emulation) ver 1.2<br> [    1.385825] Bluetooth: HIDP socket layer initialized<br> [    1.391148] Key type dns_resolver registered<br> [    1.395595] Registering SWP&#x2F;SWPB emulation handler<br> [    1.400448] Loading compiled-in X.509 certificates<br> [    1.437437] sun4i-drm display-engine: bound 1100000.mixer (ops 0xc097c610)<br> [    1.445077] sun4i-drm display-engine: bound 1c0c000.lcd-controller (ops 0xc097891c)<br> [    1.453961] [drm] Initialized sun4i-drm 1.0.0 20150629 for display-engine on minor 0<br> [    1.465480] sunxi-mmc 1c10000.mmc: card claims to support voltages below defined range<br> [    1.475874] mmc1: new high speed SDIO card at address 0001<br> [    1.493616] mmc0: host does not support reading read-only switch, assuming write-enable<br> [    1.495706] mmc0: new high speed SDHC card at address 0002<br> [    1.496918] mmcblk0: mmc0:0002 MSD20 3.73 GiB<br> [    1.499651]  mmcblk0: p1 p2 p3<br> [    1.507412] Console: switching to colour frame buffer device 100x30<br> [    1.566756] sun4i-drm display-engine: [drm] fb0: sun4i-drmdrmfb frame buffer device<br> [    1.576864] debugfs: Directory ‘1c22c00.codec’ with parent ‘V3s Audio Codec’ already present!<br> [    1.591054] ALSA device list:<br> [    1.594055]   #0: V3s Audio Codec<br> [    1.612781] EXT4-fs (mmcblk0p2): mounted filesystem with ordered data mode. Opts: (null)<br> [    1.621158] VFS: Mounted root (ext4 filesystem) on device 179:2.<br> [    1.629553] devtmpfs: mounted<br> [    1.633946] Freeing unused kernel memory: 1024K<br> [    1.638711] Run &#x2F;sbin&#x2F;init as init process<br> [    1.690069] random: fast init done<br> [    1.792914] EXT4-fs (mmcblk0p2): re-mounted. Opts: (null)<br> Starting syslogd: OK<br> Starting klogd: OK<br> Running sysctl: OK<br> Starting mdev… OK<br> [    3.206544] cfg80211: Loading compiled-in X.509 certificates for regulatory database<br> [    3.248879] cfg80211: Loaded X.509 cert ‘sforshee: 00b28ddf47aef9cea7’<br> [    3.258062] platform regulatory.0: Direct firmware load for regulatory.db failed with error -2<br> [    3.266896] cfg80211: failed to load regulatory.db<br> [    3.359658] 8723ds: module is from the staging directory, the quality is unknown, you have been warned.<br> Initializing random number generator: OK<br> Saving random seed: [    3.742299] random: dd: uninitialized urandom read (512 bytes read)<br> OK<br> Starting system message bus: [    3.812938] random: dbus-uuidgen: uninitialized urandom read (12 bytes read)<br> [    3.820155] random: dbus-uuidgen: uninitialized urandom read (8 bytes read)<br> done<br> Starting bluetoothd: OK<br> Starting network: OK<br> [    6.200965] random: crng init done<br> [    6.204396] random: 3 urandom warning(s) missed due to ratelimiting<br> Starting sshd: OK<br> Welcome to Buildroot for the LicheePi Zero<br> licheepi-zero login: </li>
<li>UART2默认速率是9600可以使用cat &#x2F;dev&#x2F;ttyS2来测试串口是否正常</li>
<li>使用rtk_hciattach绑定uart端口<br> rtk_hciattach -n -s 115200&#x2F;dev&#x2F;ttyS2 rtk_h5 &amp;</li>
</ol>
<p><code>注意这个过程需要加载固件才行，如果固件不存在、不匹配或者错误就会失败。需要把固件放到提示的位置</code><br>5. 固件及配置文件加载完后<br>        Realtek Bluetooth :Init Process finished<br>        Realtek Bluetooth post process<br>        Device setup complete<br><code>出现这个说明蓝牙模块初始化完成 此时hci0蓝牙端口已经生成,使用hciconfig工具可以查看端口及状态</code><br>6. hciconfig -a<br>        hci0:   Type: Primary  Bus: UART<br>            BD Address: 34:20:03:AA:A3:7E  ACL MTU: 1021:8  SCO MTU: 255:12<br>            UP RUNNING PSCAN ISCAN<br>            RX bytes:165747 acl:159 sco:0 events:1160 errors:0<br>            TX bytes:16622 acl:158 sco:0 commands:225 errors:0<br>            Features: 0xff 0xff 0xff 0xfe 0xdb 0xfd 0x7b 0x87<br>            Packet type: DM1 DM3 DM5 DH1 DH3 DH5 HV1 HV2 HV3<br>            Link policy: RSWITCH HOLD SNIFF PARK<br>            Link mode: SLAVE ACCEPT<br>            Name: ‘Sonavox-BT’<br>            Class: 0x040428<br>            Service Classes: Rendering<br>            Device Class: Audio&#x2F;Video, HiFi Audio Device<br>            HCI Version: 4.1 (0x7)  Revision: 0xaa7a<br>            LMP Version: 4.1 (0x7)  Subversion: 0x8cb2<br>            Manufacturer: Realtek Semiconductor Corporation (93)<br>7. bluealsa -p a2dp-sink &amp;<br>    <code>建立bluez与alsa之前的桥梁，否则无法播放音频，只能连接上</code><br>8. bluetoothd启动需要加载一些配置文件在&#x2F;etc&#x2F;bluetooth&#x2F;main.conf 不加载也可以<br>        #Default adaper name<br>        #Defaults to ‘BlueZ X.YZ’<br>        Name &#x3D; Sonavox-BT</p>
<pre><code>    #Default device class. Only the major and minor device class bits are
    #considered. Defaults to &#39;0x000000&#39;.
    Class = 0x000428

    #How long to stay in discoverable mode before going back to non-discoverable
    #The value is in seconds. Default is 180, i.e. 3 minutes.
    #0 = disable timer, i.e. stay discoverable forever
    DiscoverableTimeout = 0

    #How long to stay in pairable mode before going back to non-discoverable
    #The value is in seconds. Default is 0.
    #0 = disable timer, i.e. stay pairable forever
    PairableTimeout = 0

    #Automatic connection for bonded devices driven by platform/user events.
    #If a platform plugin uses this mechanism, automatic connections will be
    #enabled during the interval defined below. Initially, this feature
    #intends to be used to establish connections to ATT channels. Default is 60.
    AutoConnectTimeout = 60
</code></pre>
<ol start="9">
<li><p>使用蓝牙界的瑞士军刀bluetoothctl来调试蓝牙</p>
</li>
<li><p>下面是可用的命令<br>Available commands:<br>——————-<br>advertise                                         Advertise Options Submenu<br>scan                                              Scan Options Submenu<br>gatt                                              Generic Attribute Submenu<br>list                                              List available controllers<br>show [ctrl]                                       Controller information<br>select <ctrl>                                     Select default controller<br>devices                                           List available devices<br>paired-devices                                    List paired devices<br>system-alias <name>                               Set controller alias<br>reset-alias                                       Reset controller alias<br>power &lt;on&#x2F;off&gt;                                    Set controller power<br>pairable &lt;on&#x2F;off&gt;                                 Set controller pairable mode<br>discoverable &lt;on&#x2F;off&gt;                             Set controller discoverable mode<br>discoverable-timeout [value]                      Set discoverable timeout<br>agent &lt;on&#x2F;off&#x2F;capability&gt;                         Enable&#x2F;disable agent with given capability<br>default-agent                                     Set agent as the default one<br>advertise &lt;on&#x2F;off&#x2F;type&gt;                           Enable&#x2F;disable advertising with given type<br>set-alias <alias>                                 Set device alias<br>scan &lt;on&#x2F;off&gt;                                     Scan for devices<br>info [dev]                                        Device information<br>pair [dev]                                        Pair with device<br>cancel-pairing [dev]                              Cancel pairing with device<br>trust [dev]                                       Trust device<br>untrust [dev]                                     Untrust device<br>block [dev]                                       Block device<br>unblock [dev]                                     Unblock device<br>remove <dev>                                      Remove device<br>connect <dev>                                     Connect device<br>disconnect [dev]                                  Disconnect device<br>menu <name>                                       Select submenu<br>version                                           Display version<br>quit                                              Quit program<br>exit                                              Quit program<br>help                                              Display help about this program<br>export                                            Print environment variables</p>
</li>
<li><p>操作记录如下: trust dev 之后，再连接就不再提示密码了，直接连接上<br>[bluetooth]# discoverable on<br>Changing discoverable on succeeded<br>[bluetooth]# pairable on<br>Changing pairable on succeeded<br>[CHG] Device D8:8F:76:51:A7:87 Connected: yes<br>Request confirmation<br>[agent] Confirm passkey 151930 (yes&#x2F;no): yes<br>Authorize service<br>[agent] Authorize service 0000110d-0000-1000-8000-00805f9b34fb (yes&#x2F;no):<br>[CHG] Device D8:8F:76:51:A7:87 ServicesResolved: yes<br>[agent] Authorize service 0000110d-0000-1000-8000-00805f9b34fb (yes&#x2F;no): yes<br>Authorize service<br>[agent] Authorize service 0000110e-0000-1000-8000-00805f9b34fb (yes&#x2F;no): yes<br>[ 2681.328397] input: iPhone (AVRCP) as &#x2F;devices&#x2F;virtual&#x2F;input&#x2F;#input5<br>[iPhone]# list<br>Controller 34:20:03:AA:A3:7E Sonavox-BT [default]<br>[iPhone]# devices<br>Device D8:8F:76:51:A7:87 iPhone<br>[iPhone]# info<br>Device D8:8F:76:51:A7:87 (public)<br>        Name: iPhone<br>        Alias: iPhone<br>        Class: 0x007a020c<br>        Icon: phone<br>        Paired: yes<br>        Trusted: no<br>        Blocked: no<br>        Connected: yes<br>        LegacyPairing: no<br>        UUID: Vendor specific           (00000000-deca-fade-deca-deafdecacafe)<br>        UUID: Service Discovery Serve.. (00001000-0000-1000-8000-00805f9b34fb)<br>        UUID: Audio Source              (0000110a-0000-1000-8000-00805f9b34fb)<br>        UUID: A&#x2F;V Remote Control Target (0000110c-0000-1000-8000-00805f9b34fb)<br>        UUID: Advanced Audio Distribu.. (0000110d-0000-1000-8000-00805f9b34fb)<br>        UUID: A&#x2F;V Remote Control        (0000110e-0000-1000-8000-00805f9b34fb)<br>        UUID: NAP                       (00001116-0000-1000-8000-00805f9b34fb)<br>        UUID: Handsfree Audio Gateway   (0000111f-0000-1000-8000-00805f9b34fb)<br>        UUID: Phonebook Access Server   (0000112f-0000-1000-8000-00805f9b34fb)<br>        UUID: Message Access Server     (00001132-0000-1000-8000-00805f9b34fb)<br>        UUID: PnP Information           (00001200-0000-1000-8000-00805f9b34fb)<br>        UUID: Generic Access Profile    (00001800-0000-1000-8000-00805f9b34fb)<br>        UUID: Generic Attribute Profile (00001801-0000-1000-8000-00805f9b34fb)<br>        UUID: Current Time Service      (00001805-0000-1000-8000-00805f9b34fb)<br>        UUID: Device Information        (0000180a-0000-1000-8000-00805f9b34fb)<br>        UUID: Battery Service           (0000180f-0000-1000-8000-00805f9b34fb)<br>        UUID: Vendor specific           (02030302-1d19-415f-86f2-22a2106a0a77)<br>        UUID: Vendor specific           (7905f431-b5ce-4e99-a40f-4b1e122d00d0)<br>        UUID: Vendor specific           (89d3502b-0f36-433a-8ef4-c502ad55f8dc)<br>        UUID: Vendor specific           (9fa480e0-4967-4542-9390-d343dc5d04ae)<br>        UUID: Vendor specific           (d0611e78-bbb4-4591-a5f8-487910ae4366)<br>        Modalias: bluetooth:v004Cp710Cd0E70<br>        Battery Percentage: 0x55 (85)<br>[iPhone]# quit<br><br># cat &#x2F;proc&#x2F;bus&#x2F;input&#x2F;devices<br>I: Bus&#x3D;0019 Vendor&#x3D;0001 Product&#x3D;0001 Version&#x3D;0100<br>N: Name&#x3D;”1c22800.lradc”<br>P: Phys&#x3D;sun4i_lradc&#x2F;input0<br>S: Sysfs&#x3D;&#x2F;devices&#x2F;platform&#x2F;soc&#x2F;1c22800.lradc&#x2F;input&#x2F;input0<br>U: Uniq&#x3D;<br>H: Handlers&#x3D;kbd event0<br>B: PROP&#x3D;0<br>B: EV&#x3D;3<br>B: KEY&#x3D;3 0 0 0 0 0 0 0 c0000 0 0 0<br><br>I: Bus&#x3D;0019 Vendor&#x3D;0000 Product&#x3D;0000 Version&#x3D;0000<br>N: Name&#x3D;”rotary@0”<br>P: Phys&#x3D;<br>S: Sysfs&#x3D;&#x2F;devices&#x2F;platform&#x2F;rotary@0&#x2F;input&#x2F;input1<br>U: Uniq&#x3D;<br>H: Handlers&#x3D;event1<br>B: PROP&#x3D;0<br>B: EV&#x3D;5<br>B: REL&#x3D;1<br><br>I: Bus&#x3D;0018 Vendor&#x3D;0000 Product&#x3D;0000 Version&#x3D;0000<br>N: Name&#x3D;”ns2009_ts”<br>P: Phys&#x3D;input&#x2F;ts<br>S: Sysfs&#x3D;&#x2F;devices&#x2F;platform&#x2F;soc&#x2F;1c2ac00.i2c&#x2F;i2c-0&#x2F;0-0048&#x2F;input&#x2F;input2<br>U: Uniq&#x3D;<br>H: Handlers&#x3D;event2<br>B: PROP&#x3D;0<br>B: EV&#x3D;b<br>B: KEY&#x3D;400 0 0 0 0 0 0 0 0 0 0<br>B: ABS&#x3D;3<br><br>I: Bus&#x3D;0005 Vendor&#x3D;004c Product&#x3D;710c Version&#x3D;0e70<br>N: Name&#x3D;”iPhone (AVRCP)”<br>P: Phys&#x3D;34:20:03:aa:a3:7e<br>S: Sysfs&#x3D;&#x2F;devices&#x2F;virtual&#x2F;input&#x2F;input5<br>U: Uniq&#x3D;<br>H: Handlers&#x3D;kbd event3<br>B: PROP&#x3D;0<br>B: EV&#x3D;100007<br>B: KEY&#x3D;2fc800 1452 0 0 0 0 10300 49e8 c00 e1680 f f8100000 10000ffc<br>B: REL&#x3D;0</p>
</li>
<li><p>通过AVRCP来控制手机上一曲，下一曲等 <a target="_blank" rel="noopener" href="https://git.kernel.org/pub/scm/bluetooth/bluez.git/tree/doc/media-api.txt">https://git.kernel.org/pub/scm/bluetooth/bluez.git/tree/doc/media-api.txt</a><br><code>注意这里的蓝牙地址是你手机的，不是蓝牙模块的，因为要控制的是你的手机进行一一曲，下一曲的，地址不对会提示错误，就是这个原因</code><br>Error org.freedesktop.DBus.Error.UnknownObject: Method “Previous” with signature “” on interface “org.bluez.MediaControl1” doesn’t exist<br><br># dbus-send –system –print-reply –dest&#x3D;org.bluez &#x2F;org&#x2F;bluez&#x2F;hci0&#x2F;dev_D8_8F_76_51_A7_87 org.bluez.MediaControl1.Pause<br># dbus-send –system –print-reply –dest&#x3D;org.bluez &#x2F;org&#x2F;bluez&#x2F;hci0&#x2F;dev_D8_8F_76_51_A7_87 org.bluez.MediaControl1.Play<br># dbus-send –system –print-reply –dest&#x3D;org.bluez &#x2F;org&#x2F;bluez&#x2F;hci0&#x2F;dev_D8_8F_76_51_A7_87 org.bluez.MediaControl1.Previous<br># dbus-send –system –print-reply –dest&#x3D;org.bluez &#x2F;org&#x2F;bluez&#x2F;hci0&#x2F;dev_D8_8F_76_51_A7_87 org.bluez.MediaControl1.Next<br># dbus-send –system –print-reply –dest&#x3D;org.bluez &#x2F;org&#x2F;bluez&#x2F;hci0&#x2F;dev_D8_8F_76_51_A7_87 org.bluez.MediaControl1.VolumeUp<br># dbus-send –system –print-reply –dest&#x3D;org.bluez &#x2F;org&#x2F;bluez&#x2F;hci0&#x2F;dev_D8_8F_76_51_A7_87 org.bluez.MediaControl1.VolumeDown<br>以下返回结果，可以看到”org.bluez.MediaControl1”已经注册了，但是提示已废弃，新的方法是”org.bluez.MediaPlay1”,但是我这里用不了<br><node><br>    <interface name="org.freedesktop.DBus.Introspectable"><br>        <method name="Introspect"><br>            <arg name="xml" type="s" direction="out"/><br>        </method><br>    </interface><br>    <interface name="org.bluez.Device1"><br>        <method name="Disconnect"></method><br>        <method name="Connect"></method><br>        <method name="ConnectProfile"><br>            <arg name="UUID" type="s" direction="in"/><br>        </method><br>        <method name="DisconnectProfile"><br>            <arg name="UUID" type="s" direction="in"/><br>        </method><br>        <method name="Pair"></method><br>        <method name="CancelPairing"></method><br>        <property name="Address" type="s" access="read"></property><br>        <property name="AddressType" type="s" access="read"></property><br>        <property name="Name" type="s" access="read"></property><br>        <property name="Alias" type="s" access="readwrite"></property><br>        <property name="Class" type="u" access="read"></property><br>        <property name="Appearance" type="q" access="read"></property><br>        <property name="Icon" type="s" access="read"></property><br>        <property name="Paired" type="b" access="read"></property><br>        <property name="Trusted" type="b" access="readwrite"></property><br>        <property name="Blocked" type="b" access="readwrite"></property><br>        <property name="LegacyPairing" type="b" access="read"></property><br>        <property name="RSSI" type="n" access="read"></property><br>        <property name="Connected" type="b" access="read"></property><br>        <property name="UUIDs" type="as" access="read"></property><br>        <property name="Modalias" type="s" access="read"></property><br>        <property name="Adapter" type="o" access="read"></property><br>        <property name="ManufacturerData" type="a{qv}" access="read"></property><br>        <property name="ServiceData" type="a{sv}" access="read"></property><br>        <property name="TxPower" type="n" access="read"></property><br>        <property name="ServicesResolved" type="b" access="read"></property><br>        <property name="WakeAllowed" type="b" access="readwrite"></property><br>    </interface><br>    <interface name="org.freedesktop.DBus.Properties"><br>        <method name="Get"><br>            <arg name="interface" type="s" direction="in"/><br>            <arg name="name" type="s" direction="in"/><br>            <arg name="value" type="v" direction="out"/><br>        </method><br>        <method name="Set"><br>            <arg name="interface" type="s" direction="in"/><br>            <arg name="name" type="s" direction="in"/><br>            <arg name="value" type="v" direction="in"/><br>        </method><br>        <method name="GetAll"><br>            <arg name="interface" type="s" direction="in"/><br>            <arg name="properties" type="a{sv}" direction="out"/><br>        </method><br>        <signal name="PropertiesChanged"><br>            <arg name="interface" type="s"/><br>            <arg name="changed_properties" type="a{sv}"/><br>            <arg name="invalidated_properties" type="as"/><br>        </signal><br>    </interface><br>    <interface name="org.bluez.Network1"><br>        <method name="Connect"><br>            <arg name="uuid" type="s" direction="in"/><br>            <arg name="interface" type="s" direction="out"/><br>        </method><br>        <method name="Disconnect"></method><br>        <property name="Connected" type="b" access="read"></property><br>        <property name="Interface" type="s" access="read"></property><br>        <property name="UUID" type="s" access="read"></property><br>    </interface><br>    <interface name="org.bluez.MediaControl1"><br>        <method name="Play"><br>            <annotation name="org.freedesktop.DBus.Deprecated" value="true"/><br>        </method><br>        <method name="Pause"><br>            <annotation name="org.freedesktop.DBus.Deprecated" value="true"/><br>        </method><br>        <method name="Stop"><br>            <annotation name="org.freedesktop.DBus.Deprecated" value="true"/><br>        </method><br>        <method name="Next"><br>            <annotation name="org.freedesktop.DBus.Deprecated" value="true"/><br>        </method><br>        <method name="Previous"><br>            <annotation name="org.freedesktop.DBus.Deprecated" value="true"/><br>        </method><br>        <method name="VolumeUp"><br>            <annotation name="org.freedesktop.DBus.Deprecated" value="true"/><br>        </method><br>        <method name="VolumeDown"><br>            <annotation name="org.freedesktop.DBus.Deprecated" value="true"/><br>        </method><br>        <method name="FastForward"><br>            <annotation name="org.freedesktop.DBus.Deprecated" value="true"/><br>        </method><br>        <method name="Rewind"><br>            <annotation name="org.freedesktop.DBus.Deprecated" value="true"/><br>        </method><br>        <property name="Connected" type="b" access="read"></property><br>        <property name="Player" type="o" access="read"></property><br>    </interface><br>    <interface name="org.bluez.Battery1"><br>        <property name="Percentage" type="y" access="read"></property><br>    </interface><br>    <node name="fd1"/><br>    <node name="player2"/><br>    <node name="sep1"/><br>    <node name="sep2"/><br>    <node name="sep3"/><br>    <node name="sep4"/><br>    <node name="sep5"/><br>    <node name="sep6"/><br>    <node name="service0006"/><br>    <node name="service000a"/><br>    <node name="service000f"/><br>    <node name="service0014"/><br>    <node name="service0018"/><br>    <node name="service001e"/><br>    <node name="service0023"/><br>    <node name="service002d"/><br></node>“</p>
</li>
<li><p>另外在蓝牙连接成功时会在&#x2F;dev&#x2F;input&#x2F;目录下注册一个event3<br>I: Bus&#x3D;0005 Vendor&#x3D;004c Product&#x3D;710c Version&#x3D;0e70<br>N: Name&#x3D;”iPhone (AVRCP)”<br>P: Phys&#x3D;34:20:03:aa:a3:7e<br>S: Sysfs&#x3D;&#x2F;devices&#x2F;virtual&#x2F;input&#x2F;input5<br>U: Uniq&#x3D;<br>H: Handlers&#x3D;kbd event3<br>B: PROP&#x3D;0<br>B: EV&#x3D;100007<br>B: KEY&#x3D;2fc800 1452 0 0 0 0 10300 49e8 c00 e1680 f f8100000 10000ffc<br>B: REL&#x3D;0<br>我偿试过使用sendevent 去操作&#x2F;dev&#x2F;input&#x2F;event3 但是没有任何反应，不知道能不能这样操作？<br># .&#x2F;sendevent &#x2F;dev&#x2F;input&#x2F;event3 1 116 1<br># .&#x2F;sendevent &#x2F;dev&#x2F;input&#x2F;event3 0 0 0<br># .&#x2F;sendevent &#x2F;dev&#x2F;input&#x2F;event3 1 114 1</p>
</li>
<li><p>至此，蓝牙 DLNA，Airplay可以同时播放音乐了</p>
</li>
</ol>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/V3S/">V3S</a><a class="post-meta__tags" href="/tags/Audio/">Audio</a><a class="post-meta__tags" href="/tags/BT/">BT</a></div><div class="post_share"></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/null'" alt="avatar"/></div><div class="author-info__name">xfdr0805</div><div class="author-info__description">记录</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">38</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">75</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://xfdr0805.github.io"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">天天向上，点点滴滴</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/pages/8d40/" title="STM32F1上使用CherryUSB框架做HID通信">STM32F1上使用CherryUSB框架做HID通信</a><time datetime="2023-12-22T05:23:21.000Z" title="发表于 2023-12-22 13:23:21">2023-12-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/pages/bb4b/" title="Windows上位机使用HidSharp进行HID通信">Windows上位机使用HidSharp进行HID通信</a><time datetime="2023-12-22T01:44:50.000Z" title="发表于 2023-12-22 09:44:50">2023-12-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/pages/50c/" title="Windows上位机使用NPOI生成excel文档">Windows上位机使用NPOI生成excel文档</a><time datetime="2023-12-22T01:36:11.000Z" title="发表于 2023-12-22 09:36:11">2023-12-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/pages/51ce/" title="Windows上位机使用iTextSharp生成pdf文档">Windows上位机使用iTextSharp生成pdf文档</a><time datetime="2023-12-22T01:19:32.000Z" title="发表于 2023-12-22 09:19:32">2023-12-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/pages/c622/" title="全志F1C上RTT音频驱动调试">全志F1C上RTT音频驱动调试</a><time datetime="2023-08-25T05:58:43.000Z" title="发表于 2023-08-25 13:58:43">2023-08-25</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By xfdr0805</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="chat-btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? '' : ''

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
  }

  btf.addModeChange('mermaid', runMermaid)

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'sEvINwaKzuTq1RkvCDLow0q3-gzGzoHsz',
      appKey: 'WUUWPWLohtQY1iG9euBjob62',
      avatar: 'monsterid',
      serverURLs: 'https://sevinwak.lc-cn-n1-shared.com',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>